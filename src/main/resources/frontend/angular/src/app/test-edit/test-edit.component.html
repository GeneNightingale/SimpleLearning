<div id="main">

  <!--Lecture controls-->
  <div class="test">
    <div class="login-form" [formGroup]="formTest">
      <div class="test-container">
        <input id="title" [hidden]="!isInEditMode" [(ngModel)]="testModel.title" formControlName="title" maxlength = "60" autocomplete="off"
               [ngClass] = "{'input-bad': title?.errors && (title?.dirty || title?.touched)}" [value]="test.title">
        <a class="test-title" [hidden]="isInEditMode">{{test.title}}</a>
        <a class="test-title" [hidden]="isInEditMode || test.public" style="padding-left: 0.5em; filter: opacity(50%)">(–°–∫—Ä—ã—Ç)</a>
        <a class="test-button" title="–û—Ç–º–µ–Ω–∏—Ç—å" [hidden]="!isInEditMode" (click)="uneditTest()">üö´</a>
        <a class="test-button" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" [hidden]="isInEditMode" (click)="editTest()">üìù</a>
        <a class="test-button">¬†¬†</a>
        <a class="test-button" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" (click)="submitTest()">‚úî</a>
      </div>
      <div class="part-of">
        <a>–ß–∞—Å—Ç—å –∫—É—Ä—Å–∞: </a>
        <a [routerLink]="['/course-teacher/'+test.courseId]"> {{courseTitle}}</a>
      </div>
    </div>
  </div>

  <!--HERE ARE THE QUESTION CONTROLS-->

  <div class="test-content">
    <div class="test-container">
      <div class="test-container">
        <a class="current-page" style="float: left">–ß–∞—Å –Ω–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è, —Ö–≤–∏–ª–∏–Ω: </a>
        <input id="time" class="form-control" type="number" min="1" max="10080" step="1" [value]="testModel.time" style="width: 13.3%">
      </div>
      <div class="test-container">
      <a class="current-page" style="float: left">–ü–∏—Ç–∞–Ω–Ω—è: </a>
      <select id="pages" class="form-control" (ngModelChange)="pickedOption($event.target)" [(ngModel)]="currentQuestion">
        <option *ngFor="let question of questionsModel" [value]="question.questionNum">
          {{question.questionNum}}. {{question.text}}
        </option>
      </select>
      <a class="course-button" [hidden]= "questionsModel.length <2" title="–£–¥–∞–ª–∏—Ç—å" (click)="deleteCurrentPage()">‚ùå</a>
      <a class="course-button" title="–î–æ–¥–∞—Ç–∏" (click)="addQuestion()">‚ûï</a>
      <a class="course-button" title="–ó–±–µ—Ä–µ–≥—Ç–∏" (click)="saveQuestion()">‚úî</a>
      <textarea id="description" [(ngModel)]="questionsModel[currentQuestion-1].text" maxlength = "2048" type="text"
                #textarea [scrollTop]="1 -textarea.scrollHeight"></textarea>
      </div>

      <div class="answers-line">
          <a class="answers-label">–í–∞—Ä—ñ–∞–Ω—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π:</a>
          <a class="course-button" title="–î–æ–¥–∞—Ç–∏ –≤–∞—Ä—ñ–∞–Ω—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ" [hidden]="isInAddAnswerMode" (click)="addAnswerMode()">‚ûï</a>
          <a class="course-button" title="–î–æ–¥–∞—Ç–∏ –≤–∞—Ä—ñ–∞–Ω—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ" [hidden]="!isInAddAnswerMode" (click)="unaddAnswerMode()">üö´</a>
        </div>

      <div class="add-answer">
        <div class="course-form" [hidden]="!isInAddAnswerMode" [formGroup]="formAnswer">
          <a class="add-course-label" >–î–æ–¥–∞—Ç–∏ –≤–∞—Ä—ñ–∞–Ω—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ</a>
          <br class="add-course-label">
          <input class="add-answer-input" id="answer" [(ngModel)]="answerModel.answer" formControlName="answer" maxlength = "120" autocomplete="off"
                 [ngClass] = "{'input-bad': answer?.errors && (answer?.dirty || answer?.touched)}" placeholder="–í–∞—Ä—ñ–∞–Ω—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ">
          <br>
          <div *ngIf="answer?.errors?.['required'] && (answer?.dirty || answer?.touched)">
            <div class = "hint">–í–∞—Ä—ñ–∞–Ω—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –ø—É—Å—Ç–∏–º</div>
          </div>
          <br>
          <div *ngIf="!formAnswer.valid">
            <button class="button" (click)="addAnswerToQuestion()" disabled>–î–æ–¥–∞—Ç–∏ –≤–∞—Ä—ñ–∞–Ω—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ</button>
          </div>
          <div *ngIf="formAnswer.valid">
            <button class="button" (click)="addAnswerToQuestion()">–î–æ–¥–∞—Ç–∏ –≤–∞—Ä—ñ–∞–Ω—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ</button>
          </div>
          <br>
        </div>
      </div>
      <form>
        <div class="radio-line" *ngFor="let answer of questionsModel[currentQuestion-1].answers">
        ¬† <input class="radio-circle" type="radio" id="{{answer.answerId}}" name="answer" value="{{answer.answer}}"
                 (change)="pickedAnswer($event.target)" [checked]="answer.answer === questionsModel[currentQuestion-1].answer">
          <label class="radio-label" for="{{answer.answerId}}">{{answer.answer}}</label>
          <a class="course-button" title="–£–¥–∞–ª–∏—Ç—å" (click)="deleteAnswer(answer.answerId)">‚ùå</a>
        </div>
      </form>
      <p class="answers-label">–í—ñ—Ä–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å: {{questionsModel[currentQuestion-1].answer}}</p>

      <div class="page-buttons">
        <button name="submit" [disabled]= "currentQuestion === questionsModel.length" class="action_btn" type="submit" (click)="nextQuestion()">–ù–∞—Å—Ç—É–ø–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è</button>
        <button name="submit" [disabled]= "currentQuestion <2" class="action_btn" type="submit" (click)="prevQuestion()">–ü–æ–ø–µ—Ä–µ–¥–Ω—î –ø–∏—Ç–∞–Ω–Ω—è</button>
      </div>
    </div>
  </div>
</div>
