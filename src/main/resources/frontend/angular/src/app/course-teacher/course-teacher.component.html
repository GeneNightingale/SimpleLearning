<div id="main">

  <!--Course controls-->
  <div class="course">
    <div class="course-form" [formGroup]="form">
    <div class="course-container">
      <input id="title" [hidden]="!isInEditMode" [(ngModel)]="courseModel.title" formControlName="title" maxlength = "60" autocomplete="off"
             [ngClass] = "{'input-bad': title?.errors && (title?.dirty || title?.touched)}" [value]="course.title">
      <a class="course-title" [hidden]="isInEditMode">{{course.title}}</a>
      <a class="course-title" [hidden]="isInEditMode || course.public" style="padding-left: 0.5em; filter: opacity(50%)">(ะกะบััั)</a>
      <!--<a class="course-button" [hidden]="isInEditMode">ยย</a>-->
      <a class="course-button" title="ะฃัะฟะตะฒะฐะตะผะพััั" (click)="getCoursePerformance(course.courseId)">๐</a>
      <a class="course-button">ยย</a>
      <a class="course-button" title="ะกััะดะตะฝัั" (click)="getCourseStudents(course.courseId)">๐จโ๐</a>
      <a class="course-button">ยย</a>
      <a class="course-button" title="ะัะผะตะฝะธัั" [hidden]="!isInEditMode" (click)="uneditCourse()">๐ซ</a>
      <a class="course-button" [hidden]="!isInEditMode">ยย</a>
      <a class="course-button" title="ะกะพััะฐะฝะธัั" [hidden]="!isInEditMode" (click)="submitCourse(course.courseId)">โ</a>
      <a class="course-button" title="ะะตะดะฐะบัะธัะพะฒะฐัั" [hidden]="isInEditMode" (click)="editCourse()">๐</a>
      <a class="course-button">ยย</a>
      <a class="course-button" title="ะกะบัััั" [hidden]="!course.public" (click)="hideCourse(course.courseId)">๐</a>
      <a class="course-button" title="ะะฟัะฑะปะธะบะพะฒะฐัั" [hidden]="course.public" (click)="showCourse(course.courseId)">๐</a>
    </div>

    <textarea id="description" [hidden]="!isInEditMode" [(ngModel)]="courseModel.description" maxlength = "4096" type="text"
              [value]="course.description">
    </textarea>
    <p [hidden]="isInEditMode">{{course.description}}</p>
    </div>
  </div>

  <!--HERE ARE ALL THE MATERIALS-->

  <div class="course-content">
    <!--Materials/Web-Resources-->
    <div class="section-container">
      <a class="section-title">ะะตะฑ-ัะตััััั</a>
      <a class="section-button" [hidden]="isInAddMatMode" title="ะะพะฑะฐะฒะธัั" (click)="addMaterial()">โ</a>
      <a class="section-button" [hidden]="!isInAddMatMode" title="ะัะผะตะฝะธัั" (click)="unaddMaterial()">๐ซ</a>
    </div>
    <div class="materials">
      <!--Add material controls-->
      <div class="course-form" [formGroup]="formMaterial">
        <div class="add-material">
        <div class="course-form" [hidden]="!isInAddMatMode" [formGroup]="formMaterial">
          <a class="add-course-label" >ะะพะฑะฐะฒะธัั ะฒะตะฑ-ัะตัััั</a>
          <br class="add-course-label">
          <input class="add-mat-input" id="materialTitle" [(ngModel)]="material.title" formControlName="materialTitle" maxlength = "120" autocomplete="off"
                 [ngClass] = "{'input-bad': materialTitle?.errors && (materialTitle?.dirty || materialTitle?.touched)}" placeholder="ะะฐะทะฒะฐะฝะธะต">
          <br>
          <div *ngIf="materialTitle?.errors?.['minlength'] && (materialTitle?.dirty || materialTitle?.touched)">
            <div class = "hint">ะัะฟะพะปัะทัะนัะต ะฝะต ะผะตะฝะตะต 4 ัะธะผะฒะพะปะพะฒ</div>
          </div>
          <div *ngIf="materialTitle?.errors?.['required'] && (materialTitle?.dirty || materialTitle?.touched)">
            <div class = "hint">ะะฐะทะฒะฐะฝะธะต ะฝะต ะผะพะถะตั ะฑััั ะฟััััะผ</div>
          </div>
          <br>
          <input class="add-mat-input" id="materialLink" [(ngModel)]="material.link" formControlName="materialLink" maxlength = "120" autocomplete="off"
                 [ngClass] = "{'input-bad': materialLink?.errors && (materialLink?.dirty || materialLink?.touched)}" placeholder="ะกััะปะบะฐ">
          <br>
          <div *ngIf="materialLink?.errors?.['minlength'] && (materialLink?.dirty || materialLink?.touched)">
            <div class = "hint">ะัะฟะพะปัะทัะนัะต ะฝะต ะผะตะฝะตะต 4 ัะธะผะฒะพะปะพะฒ</div>
          </div>
          <div *ngIf="materialLink?.errors?.['required'] && (materialLink?.dirty || materialLink?.touched)">
            <div class = "hint">ะกััะปะบะฐ ะฝะต ะผะพะถะตั ะฑััั ะฟัััะพะน</div>
          </div>
          <br>
          <div *ngIf="!formMaterial.valid">
            <button class="button" (click)="createMaterial()" disabled>ะะพะฑะฐะฒะธัั ะฒะตะฑ-ัะตัััั</button>
          </div>
          <div *ngIf="formMaterial.valid">
            <button class="button" (click)="createMaterial()">ะะพะฑะฐะฒะธัั ะฒะตะฑ-ัะตัััั</button>
          </div>
          <br>
        </div>
      </div>
      </div>
      <div class = "mat" *ngFor="let material of course.materials">
        <a class="material-name" [hidden]="!material.public">๐ {{material.title}}</a>
        <a class="material-name" [hidden]= "material.public" style="opacity: 70%">๐ {{material.title}} (ะกะบััั)</a>
        <!--<a class="material-name" [hidden]="material.public" style="padding-left: 0.5em; filter: opacity(50%)"></a>-->
        <a class="course-button" title="ะฃะดะฐะปะธัั" (click)="deleteMaterial(material.materialId)">โ</a>
        <a class="course-button">ยย</a>
        <a class="course-button" title="ะกะบัััั" [hidden]="!material.public" (click)="hideMaterial(material.materialId)">๐</a>
        <a class="course-button" title="ะะฟัะฑะปะธะบะพะฒะฐัั" [hidden]="material.public" (click)="showMaterial(material.materialId)">๐</a>
      </div>
    </div>

    <!--Lectures-->
    <div class="section-container">
      <a class="section-title">ะะตะบัะธะธ</a>
      <a class="section-button" [hidden]="isInAddLecMode" title="ะะพะฑะฐะฒะธัั" (click)="addLecture()">โ</a>
      <a class="section-button" [hidden]="!isInAddLecMode" title="ะัะผะตะฝะธัั" (click)="unaddLecture()">๐ซ</a>
    </div>
      <!--lecture controls-->
      <div class="add-material">
        <div class="course-form" [hidden]="!isInAddLecMode" [formGroup]="formLecture">
          <a class="add-course-label" >ะะพะฑะฐะฒะธัั ะปะตะบัะธั</a>
          <br class="add-course-label">
          <input class="add-mat-input" id="lectureTitle" [(ngModel)]="lecture.title" formControlName="lectureTitle" maxlength = "60" autocomplete="off"
                 [ngClass] = "{'input-bad': lectureTitle?.errors && (lectureTitle?.dirty || lectureTitle?.touched)}" placeholder="ะะฐะทะฒะฐะฝะธะต">
          <br>
          <div *ngIf="lectureTitle?.errors?.['minlength'] && (lectureTitle?.dirty || lectureTitle?.touched)">
            <div class = "hint">ะัะฟะพะปัะทัะนัะต ะฝะต ะผะตะฝะตะต 4 ัะธะผะฒะพะปะพะฒ</div>
          </div>
          <div *ngIf="lectureTitle?.errors?.['required'] && (lectureTitle?.dirty || lectureTitle?.touched)">
            <div class = "hint">ะะฐะทะฒะฐะฝะธะต ะฝะต ะผะพะถะตั ะฑััั ะฟััััะผ</div>
          </div>
          <br>
          <div *ngIf="!formLecture.valid">
            <button class="button" (click)="createLecture()" disabled>ะะพะฑะฐะฒะธัั ะปะตะบัะธั</button>
          </div>
          <div *ngIf="formLecture.valid">
            <button class="button" (click)="createLecture()">ะะพะฑะฐะฒะธัั ะปะตะบัะธั</button>
          </div>
          <br>
        </div>
      </div>
    <div class="materials">
        <div class = "mat" *ngFor="let lecture of course.lectures">
          <a class="material-name" [hidden]="!lecture.public">๐ {{lecture.title}}</a>
          <a class="material-name" [hidden]= "lecture.public" style="opacity: 70%">๐ {{lecture.title}} (ะกะบััั)</a>
          <a class="course-button" title="ะฃะดะฐะปะธัั" (click)="deleteLecture(lecture.lectureId)">โ</a>
          <a class="course-button">ยย</a>
          <a class="course-button" title="ะะตะดะฐะบัะธัะพะฒะฐัั" (click)="editLecture(lecture.lectureId)">๐</a>
          <a class="course-button">ยย</a>
          <a class="course-button" title="ะกะบัััั" [hidden]="!lecture.public" (click)="hideLecture(lecture.lectureId)">๐</a>
          <a class="course-button" title="ะะฟัะฑะปะธะบะพะฒะฐัั" [hidden]="lecture.public" (click)="showLecture(lecture.lectureId)">๐</a>
        </div>
    </div>

    <!--Tests-->
    <div class="section-container">
      <a class="section-title">ะขะตััั</a>
      <a class="section-button" [hidden]="isInAddTestMode" title="ะะพะฑะฐะฒะธัั" (click)="addTest()">โ</a>
      <a class="section-button" [hidden]="!isInAddTestMode" title="ะัะผะตะฝะธัั" (click)="unaddTest()">๐ซ</a>
    </div>
      <!--test controls-->
      <div class="add-material">
      <div class="course-form" [hidden]="!isInAddTestMode" [formGroup]="formTest">
        <a class="add-course-label" >ะะพะฑะฐะฒะธัั ัะตัั</a>
        <br class="add-course-label">
        <input class="add-mat-input" id="testTitle" [(ngModel)]="test.title" formControlName="testTitle" maxlength = "60" autocomplete="off"
               [ngClass] = "{'input-bad': testTitle?.errors && (testTitle?.dirty || testTitle?.touched)}" placeholder="ะะฐะทะฒะฐะฝะธะต">
        <br>
        <div *ngIf="testTitle?.errors?.['minlength'] && (testTitle?.dirty || testTitle?.touched)">
          <div class = "hint">ะัะฟะพะปัะทัะนัะต ะฝะต ะผะตะฝะตะต 4 ัะธะผะฒะพะปะพะฒ</div>
        </div>
        <div *ngIf="testTitle?.errors?.['required'] && (testTitle?.dirty || testTitle?.touched)">
          <div class = "hint">ะะฐะทะฒะฐะฝะธะต ะฝะต ะผะพะถะตั ะฑััั ะฟััััะผ</div>
        </div>
        <br>
        <div *ngIf="!formTest.valid">
          <button class="button" (click)="createTest()" disabled>ะะพะฑะฐะฒะธัั ัะตัั</button>
        </div>
        <div *ngIf="formTest.valid">
          <button class="button" (click)="createTest()">ะะพะฑะฐะฒะธัั ัะตัั</button>
        </div>
        <br>
      </div>
    </div>
    <div class="materials">
        <div class = "mat" *ngFor="let test of course.tests">
          <a class="material-name" [hidden]="!test.public">๐ {{test.title}}</a>
          <a class="material-name" [hidden]= "test.public" style="opacity: 70%">๐ {{test.title}} (ะกะบััั)</a>
          <a class="course-button" title="ะฃะดะฐะปะธัั" (click)="deleteTest(test.testId)">โ</a>
          <a class="course-button">ยย</a>
          <a class="course-button" title="ะะตะดะฐะบัะธัะพะฒะฐัั" (click)="editTest(test.testId)">๐</a>
          <a class="course-button">ยย</a>
          <a class="course-button" title="ะกะบัััั" [hidden]="!test.public" (click)="hideTest(test.testId)">๐</a>
          <a class="course-button" title="ะะฟัะฑะปะธะบะพะฒะฐัั" [hidden]="test.public" (click)="showTest(test.testId)">๐</a>
        </div>
    </div>
  </div>
</div>
